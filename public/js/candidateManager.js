const CONSTANT_COUNTER_VALUE=2;var jsonConfig;candidateManager={resumeCounter:2,testTaskCounter:2,oldFileName:oldFileName="",newDiv:function(e,t,a,n){var i=document.createDocumentFragment(),o=document.createElement("div");o.setAttribute("class","wrapper-upload "+e);var d=document.createElement("input");d.setAttribute("type","file"),d.setAttribute("class","inputfile getFile"),d.setAttribute("id",t),d.setAttribute("data-role","edit"),"resume"==e?d.setAttribute("name","fileCandidateResume[]"):d.setAttribute("name","fileCandidateTestTask[]"),$(d).on("click",function(){candidateManager.getFileName(this)}),$(d).on("change",function(){candidateManager.setFileName(this)});var s=document.createElement("label");s.setAttribute("for",t),$(s).html('<img src="/img/icons/up-arrow.png" class="addImage"><span class="imageTitle">'+a+"</span>");var c=document.createElement("i");c.setAttribute("class","fa fa-close cleanCurrentBlock"),c.setAttribute("data-role","edit"),$(c).on("click",function(){candidateManager.cleanInput(this)}),i.appendChild(d),i.appendChild(s),i.appendChild(c),o.appendChild(i);var l=$(n);$(o).insertBefore(l)},cleanInput:function(e){var t=$(e).closest(".wrapper-upload"),a=t[0].className,n=document.getElementsByClassName(a),i=n.length,o=$(e).attr("data-role");if("edit"==o)var d=t.find("input")[0],s=$(d).siblings().children("span.imageTitle").text();i>1?(t.remove(),"edit"==o&&candidateManager.deleteFile(s)):(t.find("input")[0].value="",t.hasClass("resume")?t.find("span").html("File of Resume"):t.find("span").html("File of Test Task"),"edit"==o&&candidateManager.deleteFile(s))},getFileName:function(e){var t=e.value;if(""==t)var a=$(e).siblings().children("span.imageTitle").text();else var a=t.split("\\").pop();candidateManager.oldFileName=a},setFileName:function(e){var t=e.value;if(""!=t){var a=$(e).siblings().children("span.imageTitle"),n=t.split("\\").pop();n.length>0?a[0].innerHTML=n:a[0].innerHTML=candidateManager.oldFileName;"edit"==$(e).attr("data-role")&&candidateManager.editFile(e,n)}},validateEmail:function(){return!!/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/.test($("#email").val())},changeVisibleInLink:function(e,t,a){var n=e,i=e.val(),o=t;n.is(":visible")?""===i?console.log("Empty"):(n.hide(),o.text(i),o.show(),a.text("Change"),a.addClass("change")):(a.text("Add"),a.removeClass("change"),n.show(),o.hide())},uploadPhotoCandidate:function(e,t,a){var n=$(e).siblings(".add-photo-candidate").children("img#photo"),i=e.files[0],o=new FormData;o.append("tempFile",i),o.append("id",a),$.ajax({type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,url:t,data:o,success:function(e){n.attr("src",e)}})},getLocation:function(e,t){$(e).autocomplete({source:t})},doSearchCandidate:function(e,t){$(e).autocomplete({source:t})},deletePhoto:function(e,t){var a=$(".add-photo-candidate img").attr("src");if(void 0!==a){var n=a.split("/"),i=n[n.length-1];$.get(t,{fileName:i,id:e})}},updateLink:function(e,t){var a="",n="";a=$(e).attr("id"),"changeLinkLinkedin"==a&&(n="linkedin"),"changeLinkFacebook"==a&&(n="facebook"),"changeEmail"==a&&(n="email");var i=document.getElementsByName(n)[0].value;if(candidateManager.isEmpty(i))return void alert("Field is empty!");$.ajax({method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:t,data:{id:jsonConfig.id,input:n,val:i}})},isEmpty:function(e){return!e||0==e.length},editFile:function(e,t){var a=$(e).attr("id").split("_")[0],n=e.files[0],i=new FormData;i.append("tempFile",n),i.append("id",jsonConfig.id),i.append("oldFileName",candidateManager.oldFileName),i.append("fileName",t),i.append("inputId",a),$.ajax({type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,url:jsonConfig.candidateEditFile,data:i,success:function(e){console.log("File is added.")}})},deleteFile:function(e){$.ajax({method:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:jsonConfig.candidateDeleteFile,data:{id:jsonConfig.id,fileName:e},success:function(e){console.log("File is deleted.")}})},deleteFromVacancy:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).siblings(".sure-delete"),a=t.find("p");t.css("display","block");var n=$(e.target).attr("data-id"),i=$("#vacancyId").attr("data-id");a.first().click(function(){var e=$(this).closest(".candidate-list-item");$.ajax({type:"POST",url:"/vacancy/candidate/delete",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{candidate:n,vacancyId:i},success:function(t){e.remove()}})}),a.last().click(function(){$(".sure-delete").css("display","none")})},deletefrom:function(e){candidateManager.deleteFromVacancy(e)},init:function(e){jsonConfig=e,$(".delete-btn").on("click",this.deletefrom),$("a#fileResume").on("click",this.fileResume),$("a#fileTestTask").on("click",this.fileTestTask),$("i.cleanCurrentBlock").on("click",this.cleanCurrentBlock),$("input.getFile").on("change",this.setFile),$("input.getFile").on("click",this.getFile),$(".social-link_email button").on("click",this.socialLinkEmail),$(".social-link button").on("click",this.socialLink),$("input#photoCandidate").on("change",this.photoCandidate),$("#location").on("input",this.location),$("#searchItem").on("input",this.searchCandidate),$("input#updatePhotoCandidate").on("change",this.updatePhotoCandidate),$("#changeLinkLinkedin, #changeLinkFacebook, #changeEmail").on("click",this.editLink),$(function(){$("#sortCandidate").select2({tags:!0,placeholder:"Types candidate"})}),$("#candidate-name, #required_position, #education, #experience, #description").editable({ajaxOptions:{method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},url:jsonConfig.VacancyUpdate}),$("#candidate-location").editable({ajaxOptions:{method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},type:"select2",onblur:"submit",emptytext:"None",select2:{placeholder:"Select a Requester",allowClear:!0,width:"165px",minimumInputLength:3,id:function(e){return e},ajax:{url:jsonConfig.citySearchAutocomplete,dataType:"json",data:function(e,t){return{term:e}},results:function(e,t){return{results:e}}},formatResult:function(e){return e},formatSelection:function(e){return e},initSelection:function(e,t){return $.get(jsonConfig.citySearchAutocomplete,{query:e.val()},function(e){t(e)},"json")}}}),$("#skills").on("beforeItemAdd",function(e){var t=e.item;e.options&&e.options.preventPost||$.ajax({method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:jsonConfig.candidateUpdateSkills,data:{id:jsonConfig.id,skill:t},success:function(e){candidateManager.isEmpty(e)&&$("#skills").tagsinput("remove",t,{preventPost:!0})}})}),$("#skills").on("beforeItemRemove",function(e){var t=e.item;$.ajax({method:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:jsonConfig.candidateDeleteSkills,data:{id:jsonConfig.id,skill:t},success:function(e){candidateManager.isEmpty(e)||$("#skills").tagsinput("add",t,{preventPost:!0})}})})},fileResume:function(e){candidateManager.oldFileName="",candidateManager.newDiv("resume","inputResume_"+candidateManager.resumeCounter,"File of Resume",e.target),candidateManager.resumeCounter++},fileTestTask:function(e){candidateManager.oldFileName="",candidateManager.newDiv("testTask","inputTest_"+candidateManager.testTaskCounter,"File of Test Task",e.target),candidateManager.testTaskCounter++},cleanCurrentBlock:function(e){candidateManager.cleanInput(e.target)},getFile:function(e){candidateManager.getFileName(e.target)},setFile:function(e){candidateManager.setFileName(e.target)},socialLinkEmail:function(){if(!candidateManager.validateEmail($("#email").val()))return alert("Invalid email!"),!0;candidateManager.changeVisibleInLink($(this).siblings("input"),$(this).siblings("p"),$(this))},socialLink:function(){candidateManager.changeVisibleInLink($(this).siblings("input"),$(this).siblings("p"),$(this))},photoCandidate:function(){candidateManager.uploadPhotoCandidate(this,jsonConfig.uploadPhotoUrl)},location:function(){candidateManager.getLocation(this,jsonConfig.citySearchAutocomplete)},searchCandidate:function(){candidateManager.doSearchCandidate(this,jsonConfig.candidateSearchAutocomplete)},updatePhotoCandidate:function(){candidateManager.deletePhoto(jsonConfig.id,jsonConfig.deletePhotoUrl),candidateManager.uploadPhotoCandidate(this,jsonConfig.updatePhotoUrl,jsonConfig.id)},editLink:function(){candidateManager.updateLink(this,jsonConfig.editeLink)}},$(document).ready(function(){$('[name="searchTags"]').on("submit",function(e){e.preventDefault();var t=$('input[name="search-tags"]').val(),a=$('input[name="search-tags"]').attr("data-sort");$.ajax({url:"/candidate/list/"+t,type:"get",data:a,success:function(e){var n="/candidate/list/"+t+"?"+a;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})}),$('[name="searchCountry"]').on("submit",function(e){e.preventDefault();var t=$('input[name="search-country"]').val(),a=$('input[name="search-country"]').attr("data-sort");$.ajax({url:"/candidate/list/"+t,type:"get",data:a,success:function(e){var n="/candidate/list/"+t+"?"+a;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})}),$('[name="searchAge"]').on("submit",function(e){e.preventDefault();var t=$('input[name="search-age"]').val(),a=$('input[name="search-age"]').attr("data-sort");$.ajax({url:"/candidate/list/"+t,type:"get",data:a,success:function(e){var n="/candidate/list/"+t+"?"+a;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})}),$(".sort-experience select").on("change",function(e){e.preventDefault();var t=$("option:selected",this).attr("data-sort"),a=$("option:selected",this).attr("value");$.ajax({url:"/candidate/list/"+a,type:"get",data:t,success:function(e){var n="/candidate/list/"+a+"?"+t;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbmRpZGF0ZU1hbmFnZXIuanMiXSwibmFtZXMiOlsiQ09OU1RBTlRfQ09VTlRFUl9WQUxVRSIsImpzb25Db25maWciLCJjYW5kaWRhdGVNYW5hZ2VyIiwicmVzdW1lQ291bnRlciIsInRlc3RUYXNrQ291bnRlciIsIm9sZEZpbGVOYW1lIiwibmV3RGl2IiwiaW5wdXRUeXBlIiwiaWQiLCJsYWJlbFRleHQiLCJwYXJlbnRCbG9jayIsImZyYWdtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm5ld0lucHV0IiwiJCIsIm9uIiwiZ2V0RmlsZU5hbWUiLCJ0aGlzIiwic2V0RmlsZU5hbWUiLCJuZXdMYWJlbCIsImh0bWwiLCJidG5DbG9zZSIsImNsZWFuSW5wdXQiLCJhcHBlbmRDaGlsZCIsImxpbmsiLCJpbnNlcnRCZWZvcmUiLCJlbCIsInBhcmVudCIsImNsb3Nlc3QiLCJwYXJlbnRDbGFzc05hbWVzIiwiY2xhc3NOYW1lIiwiYWxsUGFyZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjb3VudFBhcmVudHMiLCJsZW5ndGgiLCJwYWdlIiwiYXR0ciIsInRhZ0lucHV0IiwiZmluZCIsImZpbGVOYW1lIiwic2libGluZ3MiLCJjaGlsZHJlbiIsInRleHQiLCJyZW1vdmUiLCJkZWxldGVGaWxlIiwidmFsdWUiLCJoYXNDbGFzcyIsInBhdGgiLCJzcGxpdCIsInBvcCIsInNwYW4iLCJpbm5lckhUTUwiLCJlZGl0RmlsZSIsInZhbGlkYXRlRW1haWwiLCJ0ZXN0IiwidmFsIiwiY2hhbmdlVmlzaWJsZUluTGluayIsImNvbWVJbnB1dCIsImNvbWVQIiwiY29tZUJ1dHRvbiIsImlucHV0IiwiaW5wdXRWYWx1ZSIsInBJbnB1dCIsImlzIiwiY29uc29sZSIsImxvZyIsImhpZGUiLCJzaG93IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInVwbG9hZFBob3RvQ2FuZGlkYXRlIiwiZWxlbSIsInVybCIsImltZyIsImZpbGUiLCJmaWxlcyIsImRhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImFqYXgiLCJ0eXBlIiwiaGVhZGVycyIsIlgtQ1NSRi1UT0tFTiIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiZ2V0TG9jYXRpb24iLCJhdXRvY29tcGxldGUiLCJzb3VyY2UiLCJkb1NlYXJjaENhbmRpZGF0ZSIsImRlbGV0ZVBob3RvIiwiaW1nUGF0aCIsImFyckRhdGEiLCJnZXQiLCJ1cGRhdGVMaW5rIiwiYnV0dG9uIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJpc0VtcHR5IiwiYWxlcnQiLCJtZXRob2QiLCJpbnB1dElkIiwiY2FuZGlkYXRlRWRpdEZpbGUiLCJjYW5kaWRhdGVEZWxldGVGaWxlIiwiZGVsZXRlRnJvbVZhY2FuY3kiLCJlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzdXJlQmxvY2siLCJ0YXJnZXQiLCJ5ZXNCdXR0b24iLCJjc3MiLCJjYW5kaWRhdGUiLCJ2YWNhbmN5SWQiLCJmaXJzdCIsImNsaWNrIiwibGFzdCIsImRlbGV0ZWZyb20iLCJldmVudCIsImluaXQiLCJjb25maWdEYXRhIiwiZmlsZVJlc3VtZSIsImZpbGVUZXN0VGFzayIsImNsZWFuQ3VycmVudEJsb2NrIiwic2V0RmlsZSIsImdldEZpbGUiLCJzb2NpYWxMaW5rRW1haWwiLCJzb2NpYWxMaW5rIiwicGhvdG9DYW5kaWRhdGUiLCJsb2NhdGlvbiIsInNlYXJjaENhbmRpZGF0ZSIsInVwZGF0ZVBob3RvQ2FuZGlkYXRlIiwiZWRpdExpbmsiLCJzZWxlY3QyIiwidGFncyIsInBsYWNlaG9sZGVyIiwiZWRpdGFibGUiLCJhamF4T3B0aW9ucyIsIlZhY2FuY3lVcGRhdGUiLCJvbmJsdXIiLCJlbXB0eXRleHQiLCJhbGxvd0NsZWFyIiwid2lkdGgiLCJtaW5pbXVtSW5wdXRMZW5ndGgiLCJjaXR5U2VhcmNoQXV0b2NvbXBsZXRlIiwiZGF0YVR5cGUiLCJ0ZXJtIiwicmVzdWx0cyIsImZvcm1hdFJlc3VsdCIsImNpdHkiLCJmb3JtYXRTZWxlY3Rpb24iLCJpbml0U2VsZWN0aW9uIiwiZWxlbWVudCIsImNhbGxiYWNrIiwicXVlcnkiLCJ0YWciLCJpdGVtIiwib3B0aW9ucyIsInByZXZlbnRQb3N0IiwiY2FuZGlkYXRlVXBkYXRlU2tpbGxzIiwic2tpbGwiLCJ0YWdzaW5wdXQiLCJjYW5kaWRhdGVEZWxldGVTa2lsbHMiLCJ1cGxvYWRQaG90b1VybCIsImNhbmRpZGF0ZVNlYXJjaEF1dG9jb21wbGV0ZSIsImRlbGV0ZVBob3RvVXJsIiwidXBkYXRlUGhvdG9VcmwiLCJlZGl0ZUxpbmsiLCJyZWFkeSIsInNvcnQiLCJkYXRhU29ydCIsInN0ciIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJ3aW5kb3ciLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUksS0FBTUEsd0JBQXlCLENBQy9CLElBQUlDLFdBRUpDLG1CQUNJQyxjQUoyQixFQUszQkMsZ0JBTDJCLEVBTTNCQyxZQUFhQSxZQUFjLEdBRTNCQyxPQUFRLFNBQVVDLEVBQVdDLEVBQUlDLEVBQVdDLEdBQ3hDLEdBQUlDLEdBQVdDLFNBQVNDLHlCQUVwQlAsRUFBU00sU0FBU0UsY0FBYyxNQUNwQ1IsR0FBT1MsYUFBYSxRQUFTLGtCQUFvQlIsRUFFakQsSUFBSVMsR0FBV0osU0FBU0UsY0FBYyxRQUN0Q0UsR0FBU0QsYUFBYSxPQUFRLFFBQzlCQyxFQUFTRCxhQUFhLFFBQVMscUJBQy9CQyxFQUFTRCxhQUFhLEtBQU1QLEdBQzVCUSxFQUFTRCxhQUFhLFlBQWEsUUFDbkIsVUFBYlIsRUFDQ1MsRUFBU0QsYUFBYSxPQUFRLHlCQUU5QkMsRUFBU0QsYUFBYSxPQUFRLDJCQUVsQ0UsRUFBRUQsR0FBVUUsR0FBRyxRQUFTLFdBQ3BCaEIsaUJBQWlCaUIsWUFBWUMsUUFFakNILEVBQUVELEdBQVVFLEdBQUcsU0FBVSxXQUNyQmhCLGlCQUFpQm1CLFlBQVlELE9BR2pDLElBQUlFLEdBQVdWLFNBQVNFLGNBQWMsUUFDdENRLEdB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QUFVeUYsR0FDM0NBLEVBQUVDLGdCQUNGLElBQUkrRCxHQUFPMUosRUFBRSw0QkFBNEJ5QyxNQUNyQ2tILEVBQVczSixFQUFFLDRCQUE0QnNCLEtBQUssWUFFbER0QixHQUFFaUUsTUFDRVAsSUFBSyxtQkFBcUJnRyxFQUMxQnhGLEtBQU0sTUFDTkosS0FBTTZGLEVBRU5wRixRQUFTLFNBQVVqRSxHQUNmLEdBQUlzSixHQUFNLG1CQUFxQkYsRUFBTyxJQUFNQyxDQUM1Q0UsU0FBUUMsVUFBVSxLQUFNLEtBQU1GLEdBQzlCRyxPQUFPN0MsU0FBVyxHQUNsQmxILEVBQUUsUUFBUU0sS0FBS0EsSUFFbkIwSixNQUFPLGlCQU1maEssRUFBRSwyQkFBMkJDLEdBQUcsU0FBVSxTQUFVeUYsR0FDaERBLEVBQUVDLGdCQUNGLElBQUlnRSxHQUFXM0osRUFBRSxrQkFBbUJHLE1BQU1tQixLQUFLLGFBQzNDb0ksRUFBTzFKLEVBQUUsa0JBQW1CRyxNQUFNbUIsS0FBSyxRQUUzQ3RCLEdBQUVpRSxNQUNFUCxJQUFLLG1CQUFxQmdHLEVBQzFCeEYsS0FBTSxNQUNOSixLQUFNNkYsRUFFTnBGLFFBQVMsU0FBVWpFLEdBRWYsR0FBSXNKLEdBQU0sbUJBQXFCRixFQUFPLElBQU1DLENBQzVDRSxTQUFRQyxVQUFVLEtBQU0sS0FBTUYsR0FDOUJHLE9BQU83QyxTQUFXLEdBQ2xCbEgsRUFBRSxRQUFRTSxLQUFLQSxJQUVuQjBKLE1BQU8iLCJmaWxlIjoiY2FuZGlkYXRlTWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAgICBjb25zdCBDT05TVEFOVF9DT1VOVEVSX1ZBTFVFID0gMjtcbiAgICB2YXIganNvbkNvbmZpZztcblxuICAgIGNhbmRpZGF0ZU1hbmFnZXIgPSB7XG4gICAgICAgIHJlc3VtZUNvdW50ZXI6IENPTlNUQU5UX0NPVU5URVJfVkFMVUUsXG4gICAgICAgIHRlc3RUYXNrQ291bnRlcjogQ09OU1RBTlRfQ09VTlRFUl9WQUxVRSxcbiAgICAgICAgb2xkRmlsZU5hbWU6IG9sZEZpbGVOYW1lID0gJycsXG5cbiAgICAgICAgbmV3RGl2OiBmdW5jdGlvbiAoaW5wdXRUeXBlLCBpZCwgbGFiZWxUZXh0LCBwYXJlbnRCbG9jaykge1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAgICAgICB2YXIgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIG5ld0Rpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3dyYXBwZXItdXBsb2FkICcgKyBpbnB1dFR5cGUpO1xuXG4gICAgICAgICAgICB2YXIgbmV3SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgbmV3SW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2ZpbGUnKTtcbiAgICAgICAgICAgIG5ld0lucHV0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnaW5wdXRmaWxlIGdldEZpbGUnKTtcbiAgICAgICAgICAgIG5ld0lucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgICAgICBuZXdJbnB1dC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm9sZScsICdlZGl0Jyk7XG4gICAgICAgICAgICBpZihpbnB1dFR5cGUgPT0gJ3Jlc3VtZScpe1xuICAgICAgICAgICAgICAgIG5ld0lucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdmaWxlQ2FuZGlkYXRlUmVzdW1lW10nKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdJbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZmlsZUNhbmRpZGF0ZVRlc3RUYXNrW10nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQobmV3SW5wdXQpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmdldEZpbGVOYW1lKHRoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKG5ld0lucHV0KS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuc2V0RmlsZU5hbWUodGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5ld0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIG5ld0xhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaWQpO1xuICAgICAgICAgICAgJChuZXdMYWJlbCkuaHRtbCgnPGltZyBzcmM9XCIvaW1nL2ljb25zL3VwLWFycm93LnBuZ1wiIGNsYXNzPVwiYWRkSW1hZ2VcIj48c3BhbiBjbGFzcz1cImltYWdlVGl0bGVcIj4nICsgbGFiZWxUZXh0ICsgJzwvc3Bhbj4nKTtcblxuICAgICAgICAgICAgdmFyIGJ0bkNsb3NlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgICAgICAgYnRuQ2xvc2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSBmYS1jbG9zZSBjbGVhbkN1cnJlbnRCbG9jaycpO1xuICAgICAgICAgICAgYnRuQ2xvc2Uuc2V0QXR0cmlidXRlKCdkYXRhLXJvbGUnLCAnZWRpdCcpO1xuICAgICAgICAgICAgJChidG5DbG9zZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5jbGVhbklucHV0KHRoaXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5ld0lucHV0KTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5ld0xhYmVsKTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ0bkNsb3NlKTtcblxuICAgICAgICAgICAgbmV3RGl2LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgICAgICAgdmFyIGxpbmsgPSAkKHBhcmVudEJsb2NrKTtcblxuICAgICAgICAgICAgJChuZXdEaXYpLmluc2VydEJlZm9yZShsaW5rKVxuICAgICAgICB9LFxuXG4gICAgICAgIGNsZWFuSW5wdXQ6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9ICQoZWwpLmNsb3Nlc3QoJy53cmFwcGVyLXVwbG9hZCcpO1xuICAgICAgICAgICAgdmFyIHBhcmVudENsYXNzTmFtZXMgPSBwYXJlbnRbMF0uY2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIGFsbFBhcmVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHBhcmVudENsYXNzTmFtZXMpO1xuICAgICAgICAgICAgdmFyIGNvdW50UGFyZW50cyA9IGFsbFBhcmVudHMubGVuZ3RoO1xuXG4gICAgICAgICAgICB2YXIgcGFnZSA9ICQoZWwpLmF0dHIoXCJkYXRhLXJvbGVcIik7XG4gICAgICAgICAgICBpZihwYWdlID09ICdlZGl0Jyl7XG4gICAgICAgICAgICAgICAgdmFyIHRhZ0lucHV0ID0gcGFyZW50LmZpbmQoJ2lucHV0JylbMF07XG4gICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gJCh0YWdJbnB1dCkuc2libGluZ3MoKS5jaGlsZHJlbignc3Bhbi5pbWFnZVRpdGxlJykudGV4dCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY291bnRQYXJlbnRzID4gMSkge1xuICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZihwYWdlID09ICdlZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmRlbGV0ZUZpbGUoZmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LmZpbmQoJ2lucHV0JylbMF0udmFsdWUgID0gXCJcIjtcblxuICAgICAgICAgICAgICAgIGlmKHBhcmVudC5oYXNDbGFzcygncmVzdW1lJykpe1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuZmluZCgnc3BhbicpLmh0bWwoJ0ZpbGUgb2YgUmVzdW1lJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmZpbmQoJ3NwYW4nKS5odG1sKCdGaWxlIG9mIFRlc3QgVGFzaycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHBhZ2UgPT0gJ2VkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuZGVsZXRlRmlsZShmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldEZpbGVOYW1lOiBmdW5jdGlvbiAodGFnSW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGFnSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBpZihwYXRoID09ICcnKXtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSAkKHRhZ0lucHV0KS5zaWJsaW5ncygpLmNoaWxkcmVuKCdzcGFuLmltYWdlVGl0bGUnKS50ZXh0KCk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBwYXRoLnNwbGl0KFwiXFxcXFwiKS5wb3AoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5vbGRGaWxlTmFtZSA9IGZpbGVOYW1lO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0RmlsZU5hbWU6IGZ1bmN0aW9uICh0YWdJbnB1dCkge1xuICAgICAgICAgICAgdmFyIHBhdGggPSB0YWdJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGlmKHBhdGggPT0gJycpe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHNwYW4gPSAkKHRhZ0lucHV0KS5zaWJsaW5ncygpLmNoaWxkcmVuKCdzcGFuLmltYWdlVGl0bGUnKTtcbiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IHBhdGguc3BsaXQoXCJcXFxcXCIpLnBvcCgpO1xuXG4gICAgICAgICAgICBpZihmaWxlTmFtZS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICBzcGFuWzBdLmlubmVySFRNTCA9IGZpbGVOYW1lO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc3BhblswXS5pbm5lckhUTUwgPSBjYW5kaWRhdGVNYW5hZ2VyLm9sZEZpbGVOYW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGFnZSA9ICQodGFnSW5wdXQpLmF0dHIoXCJkYXRhLXJvbGVcIik7XG4gICAgICAgICAgICBpZihwYWdlID09ICdlZGl0Jyl7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5lZGl0RmlsZSh0YWdJbnB1dCwgZmlsZU5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgdmFsaWRhdGVFbWFpbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGV4cHJlc3Npb24gPSAvXltcXHdcXC1cXC5cXCtdK1xcQFthLXpBLVowLTlcXC5cXC1dK1xcLlthLXpBLXowLTldezIsNH0kLztcbiAgICAgICAgICAgIGlmIChleHByZXNzaW9uLnRlc3QoJCgnI2VtYWlsJykudmFsKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNoYW5nZVZpc2libGVJbkxpbms6IGZ1bmN0aW9uIChjb21lSW5wdXQsIGNvbWVQLCBjb21lQnV0dG9uKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBjb21lSW5wdXQ7XG4gICAgICAgICAgICB2YXIgaW5wdXRWYWx1ZSA9IGNvbWVJbnB1dC52YWwoKTtcbiAgICAgICAgICAgIHZhciBwSW5wdXQgPSBjb21lUDtcblxuICAgICAgICAgICAgaWYoaW5wdXQuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VtcHR5JylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHBJbnB1dC50ZXh0KGlucHV0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwSW5wdXQuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBjb21lQnV0dG9uLnRleHQoJ0NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICBjb21lQnV0dG9uLmFkZENsYXNzKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbWVCdXR0b24udGV4dCgnQWRkJyk7XG4gICAgICAgICAgICAgICAgY29tZUJ1dHRvbi5yZW1vdmVDbGFzcygnY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2hvdygpO1xuICAgICAgICAgICAgICAgIHBJbnB1dC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBsb2FkUGhvdG9DYW5kaWRhdGU6IGZ1bmN0aW9uIChlbGVtLCB1cmwsIGlkKSB7XG4gICAgICAgICAgICB2YXIgaW1nID0gJChlbGVtKS5zaWJsaW5ncygnLmFkZC1waG90by1jYW5kaWRhdGUnKS5jaGlsZHJlbignaW1nI3Bob3RvJyk7XG4gICAgICAgICAgICB2YXIgZmlsZSA9IGVsZW0uZmlsZXNbMF07XG4gICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3RlbXBGaWxlJywgZmlsZSk7XG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgnaWQnLCBpZCk7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5hdHRyKCdzcmMnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24gKGVsZW0sIHVybCkge1xuICAgICAgICAgICAgJChlbGVtKS5hdXRvY29tcGxldGUoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBkb1NlYXJjaENhbmRpZGF0ZTogZnVuY3Rpb24gKGVsZW0sIHVybCkge1xuICAgICAgICAgICAgJChlbGVtKS5hdXRvY29tcGxldGUoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZWxldGVQaG90bzogZnVuY3Rpb24gKGlkLCB1cmwpIHtcbiAgICAgICAgICAgIHZhciBpbWdQYXRoID0gJChcIi5hZGQtcGhvdG8tY2FuZGlkYXRlIGltZ1wiKS5hdHRyKFwic3JjXCIpO1xuICAgICAgICAgICAgaWYodHlwZW9mIGltZ1BhdGggIT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgICAgICAgICAgIHZhciBhcnJEYXRhID0gaW1nUGF0aC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IGFyckRhdGFbYXJyRGF0YS5sZW5ndGggLSAxXTtcblxuICAgICAgICAgICAgICAgICQuZ2V0KHVybCwge2ZpbGVOYW1lOiBmaWxlTmFtZSwgaWQ6IGlkfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlTGluazogZnVuY3Rpb24gKGVsZW0sIHVybCkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICcnO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gJyc7XG4gICAgICAgICAgICBidXR0b24gPSAkKGVsZW0pLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICBpZihidXR0b24gPT0gJ2NoYW5nZUxpbmtMaW5rZWRpbicpe1xuICAgICAgICAgICAgICAgIGlucHV0ID0gJ2xpbmtlZGluJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGJ1dHRvbiA9PSAnY2hhbmdlTGlua0ZhY2Vib29rJyl7XG4gICAgICAgICAgICAgICAgaW5wdXQgPSAnZmFjZWJvb2snO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoYnV0dG9uID09ICdjaGFuZ2VFbWFpbCcpe1xuICAgICAgICAgICAgICAgIGlucHV0ID0gJ2VtYWlsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShpbnB1dClbMF0udmFsdWU7XG4gICAgICAgICAgICBpZihjYW5kaWRhdGVNYW5hZ2VyLmlzRW1wdHkodmFsKSl7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0ZpZWxkIGlzIGVtcHR5IScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhOiB7aWQ6IGpzb25Db25maWcuaWQsIGlucHV0OiBpbnB1dCwgdmFsOiB2YWx9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBpc0VtcHR5OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBpZighdmFsIHx8IHZhbC5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZWRpdEZpbGU6IGZ1bmN0aW9uICh0YWdJbnB1dCwgZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dElkID0gJCh0YWdJbnB1dCkuYXR0cihcImlkXCIpLnNwbGl0KCdfJylbMF07XG4gICAgICAgICAgICB2YXIgZmlsZSA9IHRhZ0lucHV0LmZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCd0ZW1wRmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ2lkJywganNvbkNvbmZpZy5pZCk7XG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgnb2xkRmlsZU5hbWUnLCBjYW5kaWRhdGVNYW5hZ2VyLm9sZEZpbGVOYW1lKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdmaWxlTmFtZScsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdpbnB1dElkJywgaW5wdXRJZCk7XG5cblxuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgdXJsOiBqc29uQ29uZmlnLmNhbmRpZGF0ZUVkaXRGaWxlLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgaXMgYWRkZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBkZWxldGVGaWxlOiBmdW5jdGlvbiAoZmlsZU5hbWUpIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cmw6IGpzb25Db25maWcuY2FuZGlkYXRlRGVsZXRlRmlsZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7aWQ6IGpzb25Db25maWcuaWQsIGZpbGVOYW1lOiBmaWxlTmFtZX0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgaXMgZGVsZXRlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuXG4gICAgICAgIGRlbGV0ZUZyb21WYWNhbmN5OiBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIHZhciBzdXJlQmxvY2sgPSAkKGUudGFyZ2V0KS5zaWJsaW5ncygnLnN1cmUtZGVsZXRlJyk7XG4gICAgICAgICAgICAgICAgdmFyIHllc0J1dHRvbiA9IHN1cmVCbG9jay5maW5kKCdwJyk7XG5cbiAgICAgICAgICAgICAgICBzdXJlQmxvY2suY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9ICQoZS50YXJnZXQpLmF0dHIoJ2RhdGEtaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFjYW5jeUlkID0gJChcIiN2YWNhbmN5SWRcIikuYXR0cignZGF0YS1pZCcpO1xuXG4gICAgICAgICAgICAgICAgeWVzQnV0dG9uLmZpcnN0KCkuY2xpY2soZnVuY3Rpb24gKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRCbG9jayA9ICQodGhpcykuY2xvc2VzdChcIi5jYW5kaWRhdGUtbGlzdC1pdGVtXCIpO1xuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL3ZhY2FuY3kvY2FuZGlkYXRlL2RlbGV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYW5kaWRhdGUnOmNhbmRpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFjYW5jeUlkJzp2YWNhbmN5SWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50QmxvY2sucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgeWVzQnV0dG9uLmxhc3QoKS5jbGljayhmdW5jdGlvbiAoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5zdXJlLWRlbGV0ZVwiKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZWZyb206IGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmRlbGV0ZUZyb21WYWNhbmN5KGV2ZW50KTtcbiAgICAgICAgfSxcbi8vIGNvbmZpZ0RhdGFcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGNvbmZpZ0RhdGEpIHtcbiAgICAgICAgICAganNvbkNvbmZpZyA9IGNvbmZpZ0RhdGE7XG4gICAgICAgICAgICQoXCIuZGVsZXRlLWJ0blwiKS5vbignY2xpY2snLHRoaXMuZGVsZXRlZnJvbSk7XG4gICAgICAgICAgICQoJ2EjZmlsZVJlc3VtZScpLm9uKCdjbGljaycsIHRoaXMuZmlsZVJlc3VtZSk7XG4gICAgICAgICAgICQoJ2EjZmlsZVRlc3RUYXNrJykub24oJ2NsaWNrJywgdGhpcy5maWxlVGVzdFRhc2spO1xuICAgICAgICAgICAkKCdpLmNsZWFuQ3VycmVudEJsb2NrJykub24oJ2NsaWNrJywgdGhpcy5jbGVhbkN1cnJlbnRCbG9jayk7XG4gICAgICAgICAgICQoJ2lucHV0LmdldEZpbGUnKS5vbignY2hhbmdlJywgdGhpcy5zZXRGaWxlKTtcbiAgICAgICAgICAgJCgnaW5wdXQuZ2V0RmlsZScpLm9uKCdjbGljaycsIHRoaXMuZ2V0RmlsZSk7XG4gICAgICAgICAgICQoJy5zb2NpYWwtbGlua19lbWFpbCBidXR0b24nKS5vbignY2xpY2snLCB0aGlzLnNvY2lhbExpbmtFbWFpbCk7XG4gICAgICAgICAgICQoJy5zb2NpYWwtbGluayBidXR0b24nKS5vbignY2xpY2snLCB0aGlzLnNvY2lhbExpbmspO1xuICAgICAgICAgICAkKCdpbnB1dCNwaG90b0NhbmRpZGF0ZScpLm9uKCdjaGFuZ2UnLCB0aGlzLnBob3RvQ2FuZGlkYXRlKTtcbiAgICAgICAgICAgJCgnI2xvY2F0aW9uJykub24oJ2lucHV0JywgdGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICQoJyNzZWFyY2hJdGVtJykub24oJ2lucHV0JywgdGhpcy5zZWFyY2hDYW5kaWRhdGUpO1xuICAgICAgICAgICAkKCdpbnB1dCN1cGRhdGVQaG90b0NhbmRpZGF0ZScpLm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZVBob3RvQ2FuZGlkYXRlKTtcbiAgICAgICAgICAgJCgnI2NoYW5nZUxpbmtMaW5rZWRpbiwgI2NoYW5nZUxpbmtGYWNlYm9vaywgI2NoYW5nZUVtYWlsJykub24oJ2NsaWNrJywgdGhpcy5lZGl0TGluayk7XG5cbiAgICAgICAgICAgJCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICB2YXIgc2VsZWN0MiA9ICQoJyNzb3J0Q2FuZGlkYXRlJykuc2VsZWN0Mih7XG4gICAgICAgICAgICAgICAgICAgdGFnczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1R5cGVzIGNhbmRpZGF0ZSdcbiAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgLy8gc2VsZWN0Mi5kYXRhKCdzZWxlY3QyJykuJGNvbnRhaW5lci5hZGRDbGFzcygnc29ydF9jYW5kaWRhdGUnKTtcbiAgICAgICAgICAgICAgIC8vIHNlbGVjdDIuZGF0YSgnc2VsZWN0MicpLiRkcm9wZG93bi5hZGRDbGFzcygnc29ydF9jYW5kaWRhdGUtLW9wZW4nKTtcbiAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJyNjYW5kaWRhdGUtbmFtZSwgI3JlcXVpcmVkX3Bvc2l0aW9uLCAjZWR1Y2F0aW9uLCAjZXhwZXJpZW5jZSwgI2Rlc2NyaXB0aW9uJykuZWRpdGFibGUoe1xuICAgICAgICAgICAgICAgYWpheE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgIHVybDoganNvbkNvbmZpZy5WYWNhbmN5VXBkYXRlLFxuICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnI2NhbmRpZGF0ZS1sb2NhdGlvbicpLmVkaXRhYmxlKHtcblxuICAgICAgICAgICAgICAgIGFqYXhPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QyJyxcbiAgICAgICAgICAgICAgICBvbmJsdXI6ICdzdWJtaXQnLFxuICAgICAgICAgICAgICAgIGVtcHR5dGV4dDogJ05vbmUnLFxuXG4gICAgICAgICAgICAgICAgc2VsZWN0Mjoge1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1NlbGVjdCBhIFJlcXVlc3RlcicsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTY1cHgnLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtSW5wdXRMZW5ndGg6IDMsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFqYXg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDoganNvbkNvbmZpZy5jaXR5U2VhcmNoQXV0b2NvbXBsZXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uICh0ZXJtLCBwYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGVybTogdGVybSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGZ1bmN0aW9uIChkYXRhLCBwYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVzdWx0czogZGF0YSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRSZXN1bHQ6IGZ1bmN0aW9uIChjaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2l0eTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0U2VsZWN0aW9uOiBmdW5jdGlvbiAoY2l0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNpdHk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGluaXRTZWxlY3Rpb246IGZ1bmN0aW9uIChlbGVtZW50LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQuZ2V0KGpzb25Db25maWcuY2l0eVNlYXJjaEF1dG9jb21wbGV0ZSwgeyBxdWVyeTogZWxlbWVudC52YWwoKSB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ2pzb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCcjc2tpbGxzJykub24oJ2JlZm9yZUl0ZW1BZGQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSBldmVudC5pdGVtO1xuICAgICAgICAgICAgICAgIGlmICghZXZlbnQub3B0aW9ucyB8fCAhZXZlbnQub3B0aW9ucy5wcmV2ZW50UG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWC1DU1JGLVRPS0VOJzogJCgnbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpLmF0dHIoJ2NvbnRlbnQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDoganNvbkNvbmZpZy5jYW5kaWRhdGVVcGRhdGVTa2lsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7aWQ6IGpzb25Db25maWcuaWQsIHNraWxsOiB0YWd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjYW5kaWRhdGVNYW5hZ2VyLmlzRW1wdHkoZGF0YSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2tpbGxzJykudGFnc2lucHV0KCdyZW1vdmUnLCB0YWcsIHtwcmV2ZW50UG9zdDogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJyNza2lsbHMnKS5vbignYmVmb3JlSXRlbVJlbW92ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IGV2ZW50Lml0ZW07XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBqc29uQ29uZmlnLmNhbmRpZGF0ZURlbGV0ZVNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2lkOiBqc29uQ29uZmlnLmlkLCBza2lsbDogdGFnfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjYW5kaWRhdGVNYW5hZ2VyLmlzRW1wdHkoZGF0YSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNza2lsbHMnKS50YWdzaW5wdXQoJ2FkZCcsIHRhZywge3ByZXZlbnRQb3N0OiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBmaWxlUmVzdW1lOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIub2xkRmlsZU5hbWUgPSAnJztcbiAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5uZXdEaXYoJ3Jlc3VtZScsICdpbnB1dFJlc3VtZV8nICsgY2FuZGlkYXRlTWFuYWdlci5yZXN1bWVDb3VudGVyLCAnRmlsZSBvZiBSZXN1bWUnLCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLnJlc3VtZUNvdW50ZXIrKztcbiAgICAgICB9LFxuXG4gICAgICAgIGZpbGVUZXN0VGFzazogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLm9sZEZpbGVOYW1lID0gJyc7XG4gICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIubmV3RGl2KCd0ZXN0VGFzaycsICdpbnB1dFRlc3RfJyArIGNhbmRpZGF0ZU1hbmFnZXIudGVzdFRhc2tDb3VudGVyLCAnRmlsZSBvZiBUZXN0IFRhc2snLCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLnRlc3RUYXNrQ291bnRlcisrO1xuICAgICAgIH0sXG5cbiAgICAgICAgY2xlYW5DdXJyZW50QmxvY2s6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmNsZWFuSW5wdXQoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRGaWxlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuZ2V0RmlsZU5hbWUoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRGaWxlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuc2V0RmlsZU5hbWUoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzb2NpYWxMaW5rRW1haWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmKCFjYW5kaWRhdGVNYW5hZ2VyLnZhbGlkYXRlRW1haWwoJCgnI2VtYWlsJykudmFsKCkpKXtcbiAgICAgICAgICAgICAgICBhbGVydCgnSW52YWxpZCBlbWFpbCEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuY2hhbmdlVmlzaWJsZUluTGluaygkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLCAkKHRoaXMpLnNpYmxpbmdzKCdwJyksICQodGhpcykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNvY2lhbExpbms6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuY2hhbmdlVmlzaWJsZUluTGluaygkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLCAkKHRoaXMpLnNpYmxpbmdzKCdwJyksICQodGhpcykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBob3RvQ2FuZGlkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLnVwbG9hZFBob3RvQ2FuZGlkYXRlKHRoaXMsIGpzb25Db25maWcudXBsb2FkUGhvdG9VcmwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGxvY2F0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmdldExvY2F0aW9uKHRoaXMsIGpzb25Db25maWcuY2l0eVNlYXJjaEF1dG9jb21wbGV0ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VhcmNoQ2FuZGlkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmRvU2VhcmNoQ2FuZGlkYXRlKHRoaXMsIGpzb25Db25maWcuY2FuZGlkYXRlU2VhcmNoQXV0b2NvbXBsZXRlKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVQaG90b0NhbmRpZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5kZWxldGVQaG90byhqc29uQ29uZmlnLmlkLCBqc29uQ29uZmlnLmRlbGV0ZVBob3RvVXJsKTtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIudXBsb2FkUGhvdG9DYW5kaWRhdGUodGhpcywganNvbkNvbmZpZy51cGRhdGVQaG90b1VybCwganNvbkNvbmZpZy5pZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZWRpdExpbms6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIudXBkYXRlTGluayh0aGlzLCBqc29uQ29uZmlnLmVkaXRlTGluayk7XG4gICAgICAgIH0sXG5cbiAgICB9O1xuXG4gICAgJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnW25hbWU9XCJzZWFyY2hUYWdzXCJdJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgc29ydCA9ICQoJ2lucHV0W25hbWU9XCJzZWFyY2gtdGFnc1wiXScpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3J0ID0gJCgnaW5wdXRbbmFtZT1cInNlYXJjaC10YWdzXCJdJykuYXR0cignZGF0YS1zb3J0Jyk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NhbmRpZGF0ZS9saXN0LycgKyBzb3J0LFxuICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFTb3J0LFxuXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGh0bWwpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gJy9jYW5kaWRhdGUvbGlzdC8nICsgc29ydCArICc/JyArIGRhdGFTb3J0O1xuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBzdHIpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmh0bWwoaHRtbCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ1tuYW1lPVwic2VhcmNoQ291bnRyeVwiXScpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHNvcnQgPSAkKCdpbnB1dFtuYW1lPVwic2VhcmNoLWNvdW50cnlcIl0nKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBkYXRhU29ydCA9ICQoJ2lucHV0W25hbWU9XCJzZWFyY2gtY291bnRyeVwiXScpLmF0dHIoJ2RhdGEtc29ydCcpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogJy9jYW5kaWRhdGUvbGlzdC8nICsgc29ydCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhU29ydCxcblxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAnL2NhbmRpZGF0ZS9saXN0LycgKyBzb3J0ICsgJz8nICsgZGF0YVNvcnQ7XG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHN0cik7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuaHRtbChodG1sKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnW25hbWU9XCJzZWFyY2hBZ2VcIl0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBzb3J0ID0gJCgnaW5wdXRbbmFtZT1cInNlYXJjaC1hZ2VcIl0nKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBkYXRhU29ydCA9ICQoJ2lucHV0W25hbWU9XCJzZWFyY2gtYWdlXCJdJykuYXR0cignZGF0YS1zb3J0Jyk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NhbmRpZGF0ZS9saXN0LycgKyBzb3J0LFxuICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFTb3J0LFxuXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGh0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcvY2FuZGlkYXRlL2xpc3QvJyArIHNvcnQgKyAnPycgKyBkYXRhU29ydDtcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc3RyKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5odG1sKGh0bWwpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuc29ydC1leHBlcmllbmNlIHNlbGVjdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3J0ID0gJChcIm9wdGlvbjpzZWxlY3RlZFwiLCB0aGlzKS5hdHRyKCdkYXRhLXNvcnQnKTtcbiAgICAgICAgICAgIHZhciBzb3J0ID0gJChcIm9wdGlvbjpzZWxlY3RlZFwiLCB0aGlzKS5hdHRyKCd2YWx1ZScpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogJy9jYW5kaWRhdGUvbGlzdC8nICsgc29ydCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhU29ydCxcblxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChodG1sKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcvY2FuZGlkYXRlL2xpc3QvJyArIHNvcnQgKyAnPycgKyBkYXRhU29ydDtcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc3RyKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5odG1sKGh0bWwpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIH0pOyJdfQ==
