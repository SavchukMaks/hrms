const CONSTANT_COUNTER_VALUE=2;var jsonConfig;candidateManager={resumeCounter:2,testTaskCounter:2,oldFileName:oldFileName="",newDiv:function(e,t,a,n){var i=document.createDocumentFragment(),o=document.createElement("div");o.setAttribute("class","wrapper-upload "+e);var s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("class","inputfile getFile"),s.setAttribute("id",t),s.setAttribute("data-role","edit"),"resume"==e?s.setAttribute("name","fileCandidateResume[]"):s.setAttribute("name","fileCandidateTestTask[]"),$(s).on("click",function(){candidateManager.getFileName(this)}),$(s).on("change",function(){candidateManager.setFileName(this)});var d=document.createElement("label");d.setAttribute("for",t),$(d).html('<img src="/img/icons/up-arrow.png" class="addImage"><span class="imageTitle">'+a+"</span>");var c=document.createElement("i");c.setAttribute("class","fa fa-close cleanCurrentBlock"),c.setAttribute("data-role","edit"),$(c).on("click",function(){candidateManager.cleanInput(this)}),i.appendChild(s),i.appendChild(d),i.appendChild(c),o.appendChild(i);var l=$(n);$(o).insertBefore(l)},cleanInput:function(e){var t=$(e).closest(".wrapper-upload"),a=t[0].className,n=document.getElementsByClassName(a),i=n.length,o=$(e).attr("data-role");if("edit"==o)var s=t.find("input")[0],d=$(s).siblings().children("span.imageTitle").text();i>1?(t.remove(),"edit"==o&&candidateManager.deleteFile(d)):(t.find("input")[0].value="",t.hasClass("resume")?t.find("span").html("File of Resume"):t.find("span").html("File of Test Task"),"edit"==o&&candidateManager.deleteFile(d))},getFileName:function(e){var t=e.value;if(""==t)var a=$(e).siblings().children("span.imageTitle").text();else var a=t.split("\\").pop();candidateManager.oldFileName=a},setFileName:function(e){var t=e.value;if(""!=t){var a=$(e).siblings().children("span.imageTitle"),n=t.split("\\").pop();n.length>0?a[0].innerHTML=n:a[0].innerHTML=candidateManager.oldFileName;"edit"==$(e).attr("data-role")&&candidateManager.editFile(e,n)}},validateEmail:function(){return!!/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/.test($("#email").val())},changeVisibleInLink:function(e,t,a){var n=e,i=e.val(),o=t;n.is(":visible")?""===i?console.log("Empty"):(n.hide(),o.text(i),o.show(),a.text("Change"),a.addClass("change")):(a.text("Add"),a.removeClass("change"),n.show(),o.hide())},uploadPhotoCandidate:function(e,t,a){var n=$(e).siblings(".add-photo-candidate").children("img#photo"),i=e.files[0],o=new FormData;o.append("tempFile",i),o.append("id",a),$.ajax({type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,url:t,data:o,success:function(e){n.attr("src",e)}})},getLocation:function(e,t){$(e).autocomplete({source:t})},doSearchCandidate:function(e,t){$(e).autocomplete({source:t})},deletePhoto:function(e,t){var a=$(".add-photo-candidate img").attr("src");if(void 0!==a){var n=a.split("/"),i=n[n.length-1];$.get(t,{fileName:i,id:e})}},updateLink:function(e,t){var a="",n="";a=$(e).attr("id"),"changeLinkLinkedin"==a&&(n="linkedin"),"changeLinkFacebook"==a&&(n="facebook"),"changeEmail"==a&&(n="email");var i=document.getElementsByName(n)[0].value;if(candidateManager.isEmpty(i))return void alert("Field is empty!");$.ajax({method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:t,data:{id:jsonConfig.id,input:n,val:i}})},isEmpty:function(e){return!e||0==e.length},editFile:function(e,t){var a=$(e).attr("id").split("_")[0],n=e.files[0],i=new FormData;i.append("tempFile",n),i.append("id",jsonConfig.id),i.append("oldFileName",candidateManager.oldFileName),i.append("fileName",t),i.append("inputId",a),$.ajax({type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,url:jsonConfig.candidateEditFile,data:i,success:function(e){console.log("File is added.")}})},deleteFile:function(e){$.ajax({method:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:jsonConfig.candidateDeleteFile,data:{id:jsonConfig.id,fileName:e},success:function(e){console.log("File is deleted.")}})},deleteFromVacancy:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).siblings(".sure-delete"),a=t.find("p");t.css("display","block");var n=$(e.target).attr("data-id"),i=$("#vacancyId").attr("data-id");a.first().click(function(){var e=$(this).closest(".candidate-list-item");$.ajax({type:"POST",url:"/vacancy/candidate/delete",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{candidate:n,vacancyId:i},success:function(t){e.remove()}})}),a.last().click(function(){$(".sure-delete").css("display","none")})},deletefrom:function(e){candidateManager.deleteFromVacancy(e)},init:function(e){jsonConfig=e,$(".delete-btn").on("click",this.deletefrom),$("a#fileResume").on("click",this.fileResume),$("a#fileTestTask").on("click",this.fileTestTask),$("i.cleanCurrentBlock").on("click",this.cleanCurrentBlock),$("input.getFile").on("change",this.setFile),$("input.getFile").on("click",this.getFile),$(".social-link_email button").on("click",this.socialLinkEmail),$(".social-link button").on("click",this.socialLink),$("input#photoCandidate").on("change",this.photoCandidate),$("#location").on("input",this.location),$("#searchItem").on("input",this.searchCandidate),$("input#updatePhotoCandidate").on("change",this.updatePhotoCandidate),$("#changeLinkLinkedin, #changeLinkFacebook, #changeEmail").on("click",this.editLink),$(function(){$("#sortCandidate").select2({tags:!0,placeholder:"Types candidate"})}),$("#candidate-name, #required_position, #education, #experience, #description").editable({ajaxOptions:{method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},url:jsonConfig.VacancyUpdate}),$("#candidate-location").editable({ajaxOptions:{method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},type:"select2",onblur:"submit",emptytext:"None",select2:{placeholder:"Select a Requester",allowClear:!0,width:"165px",minimumInputLength:3,id:function(e){return e},ajax:{url:jsonConfig.citySearchAutocomplete,dataType:"json",data:function(e,t){return{term:e}},results:function(e,t){return{results:e}}},formatResult:function(e){return e},formatSelection:function(e){return e},initSelection:function(e,t){return $.get(jsonConfig.citySearchAutocomplete,{query:e.val()},function(e){t(e)},"json")}}}),$("#skills").on("beforeItemAdd",function(e){var t=e.item;e.options&&e.options.preventPost||$.ajax({method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:jsonConfig.candidateUpdateSkills,data:{id:jsonConfig.id,skill:t},success:function(e){candidateManager.isEmpty(e)&&$("#skills").tagsinput("remove",t,{preventPost:!0})}})}),$("#skills").on("beforeItemRemove",function(e){var t=e.item;$.ajax({method:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:jsonConfig.candidateDeleteSkills,data:{id:jsonConfig.id,skill:t},success:function(e){candidateManager.isEmpty(e)||$("#skills").tagsinput("add",t,{preventPost:!0})}})})},fileResume:function(e){candidateManager.oldFileName="",candidateManager.newDiv("resume","inputResume_"+candidateManager.resumeCounter,"File of Resume",e.target),candidateManager.resumeCounter++},fileTestTask:function(e){candidateManager.oldFileName="",candidateManager.newDiv("testTask","inputTest_"+candidateManager.testTaskCounter,"File of Test Task",e.target),candidateManager.testTaskCounter++},cleanCurrentBlock:function(e){candidateManager.cleanInput(e.target)},getFile:function(e){candidateManager.getFileName(e.target)},setFile:function(e){candidateManager.setFileName(e.target)},socialLinkEmail:function(){if(!candidateManager.validateEmail($("#email").val()))return alert("Invalid email!"),!0;candidateManager.changeVisibleInLink($(this).siblings("input"),$(this).siblings("p"),$(this))},socialLink:function(){candidateManager.changeVisibleInLink($(this).siblings("input"),$(this).siblings("p"),$(this))},photoCandidate:function(){candidateManager.uploadPhotoCandidate(this,jsonConfig.uploadPhotoUrl)},location:function(){candidateManager.getLocation(this,jsonConfig.citySearchAutocomplete)},searchCandidate:function(){candidateManager.doSearchCandidate(this,jsonConfig.candidateSearchAutocomplete)},updatePhotoCandidate:function(){candidateManager.deletePhoto(jsonConfig.id,jsonConfig.deletePhotoUrl),candidateManager.uploadPhotoCandidate(this,jsonConfig.updatePhotoUrl,jsonConfig.id)},editLink:function(){candidateManager.updateLink(this,jsonConfig.editeLink)}},$(document).ready(function(){$('[name="searchTags"]').on("submit",function(e){e.preventDefault();var t=$('input[name="search-tags"]').val(),a=$('input[name="search-tags"]').attr("data-sort");$.ajax({url:"/candidate/list/"+t,type:"get",data:a,success:function(e){var n="/candidate/list/"+t+"?"+a;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})}),$('[name="searchCountry"]').on("submit",function(e){e.preventDefault();var t=$('input[name="search-country"]').val(),a=$('input[name="search-country"]').attr("data-sort");$.ajax({url:"/candidate/list/"+t,type:"get",data:a,success:function(e){var n="/candidate/list/"+t+"?"+a;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})}),$('[name="searchAge"]').on("submit",function(e){e.preventDefault();var t=$('input[name="search-age"]').val(),a=$('input[name="search-age"]').attr("data-sort");$.ajax({url:"/candidate/list/"+t,type:"get",data:a,success:function(e){var n="/candidate/list/"+t+"?"+a;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})}),$(".sort-experience select").on("change",function(e){e.preventDefault();var t=$("option:selected",this).attr("data-sort"),a=$("option:selected",this).attr("value");$.ajax({url:"/candidate/list/"+a,type:"get",data:t,success:function(e){var n="/candidate/list/"+a+"?"+t;history.pushState(null,null,n),window.location="",$("body").html(e)},error:function(){}})})}),$(".more").click(function(){"Show more"===$(this).text()?($(this).siblings(".item.hidden").toggleClass("hidden visible"),$(this).text("Show less")):($(this).siblings(".item.visible").toggleClass("hidden visible"),$(this).text("Show more"))}),$("#candidate_add").keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1jYW5kaWRhdGUuanMiXSwibmFtZXMiOlsiQ09OU1RBTlRfQ09VTlRFUl9WQUxVRSIsImpzb25Db25maWciLCJjYW5kaWRhdGVNYW5hZ2VyIiwicmVzdW1lQ291bnRlciIsInRlc3RUYXNrQ291bnRlciIsIm9sZEZpbGVOYW1lIiwibmV3RGl2IiwiaW5wdXRUeXBlIiwiaWQiLCJsYWJlbFRleHQiLCJwYXJlbnRCbG9jayIsImZyYWdtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm5ld0lucHV0IiwiJCIsIm9uIiwiZ2V0RmlsZU5hbWUiLCJ0aGlzIiwic2V0RmlsZU5hbWUiLCJuZXdMYWJlbCIsImh0bWwiLCJidG5DbG9zZSIsImNsZWFuSW5wdXQiLCJhcHBlbmRDaGlsZCIsImxpbmsiLCJpbnNlcnRCZWZvcmUiLCJlbCIsInBhcmVudCIsImNsb3Nlc3QiLCJwYXJlbnRDbGFzc05hbWVzIiwiY2xhc3NOYW1lIiwiYWxsUGFyZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjb3VudFBhcmVudHMiLCJsZW5ndGgiLCJwYWdlIiwiYXR0ciIsInRhZ0lucHV0IiwiZmluZCIsImZpbGVOYW1lIiwic2libGluZ3MiLCJjaGlsZHJlbiIsInRleHQiLCJyZW1vdmUiLCJkZWxldGVGaWxlIiwidmFsdWUiLCJoYXNDbGFzcyIsInBhdGgiLCJzcGxpdCIsInBvcCIsInNwYW4iLCJpbm5lckhUTUwiLCJlZGl0RmlsZSIsInZhbGlkYXRlRW1haWwiLCJ0ZXN0IiwidmFsIiwiY2hhbmdlVmlzaWJsZUluTGluayIsImNvbWVJbnB1dCIsImNvbWVQIiwiY29tZUJ1dHRvbiIsImlucHV0IiwiaW5wdXRWYWx1ZSIsInBJbnB1dCIsImlzIiwiY29uc29sZSIsImxvZyIsImhpZGUiLCJzaG93IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInVwbG9hZFBob3RvQ2FuZGlkYXRlIiwiZWxlbSIsInVybCIsImltZyIsImZpbGUiLCJmaWxlcyIsImRhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImFqYXgiLCJ0eXBlIiwiaGVhZGVycyIsIlgtQ1NSRi1UT0tFTiIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiZ2V0TG9jYXRpb24iLCJhdXRvY29tcGxldGUiLCJzb3VyY2UiLCJkb1NlYXJjaENhbmRpZGF0ZSIsImRlbGV0ZVBob3RvIiwiaW1nUGF0aCIsImFyckRhdGEiLCJnZXQiLCJ1cGRhdGVMaW5rIiwiYnV0dG9uIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJpc0VtcHR5IiwiYWxlcnQiLCJtZXRob2QiLCJpbnB1dElkIiwiY2FuZGlkYXRlRWRpdEZpbGUiLCJjYW5kaWRhdGVEZWxldGVGaWxlIiwiZGVsZXRlRnJvbVZhY2FuY3kiLCJlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzdXJlQmxvY2siLCJ0YXJnZXQiLCJ5ZXNCdXR0b24iLCJjc3MiLCJjYW5kaWRhdGUiLCJ2YWNhbmN5SWQiLCJmaXJzdCIsImNsaWNrIiwibGFzdCIsImRlbGV0ZWZyb20iLCJldmVudCIsImluaXQiLCJjb25maWdEYXRhIiwiZmlsZVJlc3VtZSIsImZpbGVUZXN0VGFzayIsImNsZWFuQ3VycmVudEJsb2NrIiwic2V0RmlsZSIsImdldEZpbGUiLCJzb2NpYWxMaW5rRW1haWwiLCJzb2NpYWxMaW5rIiwicGhvdG9DYW5kaWRhdGUiLCJsb2NhdGlvbiIsInNlYXJjaENhbmRpZGF0ZSIsInVwZGF0ZVBob3RvQ2FuZGlkYXRlIiwiZWRpdExpbmsiLCJzZWxlY3QyIiwidGFncyIsInBsYWNlaG9sZGVyIiwiZWRpdGFibGUiLCJhamF4T3B0aW9ucyIsIlZhY2FuY3lVcGRhdGUiLCJvbmJsdXIiLCJlbXB0eXRleHQiLCJhbGxvd0NsZWFyIiwid2lkdGgiLCJtaW5pbXVtSW5wdXRMZW5ndGgiLCJjaXR5U2VhcmNoQXV0b2NvbXBsZXRlIiwiZGF0YVR5cGUiLCJ0ZXJtIiwicmVzdWx0cyIsImZvcm1hdFJlc3VsdCIsImNpdHkiLCJmb3JtYXRTZWxlY3Rpb24iLCJpbml0U2VsZWN0aW9uIiwiZWxlbWVudCIsImNhbGxiYWNrIiwicXVlcnkiLCJ0YWciLCJpdGVtIiwib3B0aW9ucyIsInByZXZlbnRQb3N0IiwiY2FuZGlkYXRlVXBkYXRlU2tpbGxzIiwic2tpbGwiLCJ0YWdzaW5wdXQiLCJjYW5kaWRhdGVEZWxldGVTa2lsbHMiLCJ1cGxvYWRQaG90b1VybCIsImNhbmRpZGF0ZVNlYXJjaEF1dG9jb21wbGV0ZSIsImRlbGV0ZVBob3RvVXJsIiwidXBkYXRlUGhvdG9VcmwiLCJlZGl0ZUxpbmsiLCJyZWFkeSIsInNvcnQiLCJkYXRhU29ydCIsInN0ciIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJ3aW5kb3ciLCJlcnJvciIsInRvZ2dsZUNsYXNzIiwia2V5ZG93biIsImtleUNvZGUiXSwibWFwcGluZ3MiOiJBQUFJLEtBQU1BLHdCQUF5QixDQUMvQixJQUFJQyxXQUVKQyxtQkFDSUMsY0FKMkIsRUFLM0JDLGdCQUwyQixFQU0zQkMsWUFBYUEsWUFBYyxHQUUzQkMsT0FBUSxTQUFVQyxFQUFXQyxFQUFJQyxFQUFXQyxHQUN4QyxHQUFJQyxHQUFXQyxTQUFTQyx5QkFFcEJQLEVBQVNNLFNBQVNFLGNBQWMsTUFDcENSLEdBQU9TLGFBQWEsUUFBUyxrQkFBb0JSLEVBRWpELElBQUlTLEdBQVdKLFNBQVNFLGNBQWMsUUFDdENFLEdBQVNELGFBQWEsT0FBUSxRQUM5QkMsRUFBU0QsYUFBYSxRQUFTLHFCQUMvQkMsRUFBU0QsYUFBYSxLQUFNUCxHQUM1QlEsRUFBU0QsYUFBYSxZQUFhLFFBQ25CLFVBQWJSLEVBQ0NTLEVBQVNELGFBQWEsT0FBUSx5QkFFOUJDLEVBQVNELGFBQWEsT0FBUSwyQkFFbENFLEVBQUVELEdBQVVFLEdBQUcsUUFBUyxXQUNwQmhCLGlCQUFpQmlCLFlBQVlDLFFBRWpDSCxFQUFFRCxHQUFVRSxHQUFHLFNBQVUsV0FDckJoQixpQkFBaUJtQixZQUFZRCxPQUdqQyxJ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NEQsUUFFTCxNQURBNUQsR0FBTVosa0JBQ0MiLCJmaWxlIjoiYWRkLWNhbmRpZGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAgICBjb25zdCBDT05TVEFOVF9DT1VOVEVSX1ZBTFVFID0gMjtcbiAgICB2YXIganNvbkNvbmZpZztcblxuICAgIGNhbmRpZGF0ZU1hbmFnZXIgPSB7XG4gICAgICAgIHJlc3VtZUNvdW50ZXI6IENPTlNUQU5UX0NPVU5URVJfVkFMVUUsXG4gICAgICAgIHRlc3RUYXNrQ291bnRlcjogQ09OU1RBTlRfQ09VTlRFUl9WQUxVRSxcbiAgICAgICAgb2xkRmlsZU5hbWU6IG9sZEZpbGVOYW1lID0gJycsXG5cbiAgICAgICAgbmV3RGl2OiBmdW5jdGlvbiAoaW5wdXRUeXBlLCBpZCwgbGFiZWxUZXh0LCBwYXJlbnRCbG9jaykge1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAgICAgICB2YXIgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIG5ld0Rpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3dyYXBwZXItdXBsb2FkICcgKyBpbnB1dFR5cGUpO1xuXG4gICAgICAgICAgICB2YXIgbmV3SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgbmV3SW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2ZpbGUnKTtcbiAgICAgICAgICAgIG5ld0lucHV0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnaW5wdXRmaWxlIGdldEZpbGUnKTtcbiAgICAgICAgICAgIG5ld0lucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgICAgICBuZXdJbnB1dC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm9sZScsICdlZGl0Jyk7XG4gICAgICAgICAgICBpZihpbnB1dFR5cGUgPT0gJ3Jlc3VtZScpe1xuICAgICAgICAgICAgICAgIG5ld0lucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdmaWxlQ2FuZGlkYXRlUmVzdW1lW10nKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdJbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZmlsZUNhbmRpZGF0ZVRlc3RUYXNrW10nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQobmV3SW5wdXQpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmdldEZpbGVOYW1lKHRoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKG5ld0lucHV0KS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuc2V0RmlsZU5hbWUodGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5ld0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIG5ld0xhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaWQpO1xuICAgICAgICAgICAgJChuZXdMYWJlbCkuaHRtbCgnPGltZyBzcmM9XCIvaW1nL2ljb25zL3VwLWFycm93LnBuZ1wiIGNsYXNzPVwiYWRkSW1hZ2VcIj48c3BhbiBjbGFzcz1cImltYWdlVGl0bGVcIj4nICsgbGFiZWxUZXh0ICsgJzwvc3Bhbj4nKTtcblxuICAgICAgICAgICAgdmFyIGJ0bkNsb3NlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgICAgICAgYnRuQ2xvc2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSBmYS1jbG9zZSBjbGVhbkN1cnJlbnRCbG9jaycpO1xuICAgICAgICAgICAgYnRuQ2xvc2Uuc2V0QXR0cmlidXRlKCdkYXRhLXJvbGUnLCAnZWRpdCcpO1xuICAgICAgICAgICAgJChidG5DbG9zZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5jbGVhbklucHV0KHRoaXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5ld0lucHV0KTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5ld0xhYmVsKTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ0bkNsb3NlKTtcblxuICAgICAgICAgICAgbmV3RGl2LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgICAgICAgdmFyIGxpbmsgPSAkKHBhcmVudEJsb2NrKTtcblxuICAgICAgICAgICAgJChuZXdEaXYpLmluc2VydEJlZm9yZShsaW5rKVxuICAgICAgICB9LFxuXG4gICAgICAgIGNsZWFuSW5wdXQ6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9ICQoZWwpLmNsb3Nlc3QoJy53cmFwcGVyLXVwbG9hZCcpO1xuICAgICAgICAgICAgdmFyIHBhcmVudENsYXNzTmFtZXMgPSBwYXJlbnRbMF0uY2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIGFsbFBhcmVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHBhcmVudENsYXNzTmFtZXMpO1xuICAgICAgICAgICAgdmFyIGNvdW50UGFyZW50cyA9IGFsbFBhcmVudHMubGVuZ3RoO1xuXG4gICAgICAgICAgICB2YXIgcGFnZSA9ICQoZWwpLmF0dHIoXCJkYXRhLXJvbGVcIik7XG4gICAgICAgICAgICBpZihwYWdlID09ICdlZGl0Jyl7XG4gICAgICAgICAgICAgICAgdmFyIHRhZ0lucHV0ID0gcGFyZW50LmZpbmQoJ2lucHV0JylbMF07XG4gICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gJCh0YWdJbnB1dCkuc2libGluZ3MoKS5jaGlsZHJlbignc3Bhbi5pbWFnZVRpdGxlJykudGV4dCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY291bnRQYXJlbnRzID4gMSkge1xuICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZihwYWdlID09ICdlZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmRlbGV0ZUZpbGUoZmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LmZpbmQoJ2lucHV0JylbMF0udmFsdWUgID0gXCJcIjtcblxuICAgICAgICAgICAgICAgIGlmKHBhcmVudC5oYXNDbGFzcygncmVzdW1lJykpe1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuZmluZCgnc3BhbicpLmh0bWwoJ0ZpbGUgb2YgUmVzdW1lJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmZpbmQoJ3NwYW4nKS5odG1sKCdGaWxlIG9mIFRlc3QgVGFzaycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHBhZ2UgPT0gJ2VkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuZGVsZXRlRmlsZShmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldEZpbGVOYW1lOiBmdW5jdGlvbiAodGFnSW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGFnSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBpZihwYXRoID09ICcnKXtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSAkKHRhZ0lucHV0KS5zaWJsaW5ncygpLmNoaWxkcmVuKCdzcGFuLmltYWdlVGl0bGUnKS50ZXh0KCk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBwYXRoLnNwbGl0KFwiXFxcXFwiKS5wb3AoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5vbGRGaWxlTmFtZSA9IGZpbGVOYW1lO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0RmlsZU5hbWU6IGZ1bmN0aW9uICh0YWdJbnB1dCkge1xuICAgICAgICAgICAgdmFyIHBhdGggPSB0YWdJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGlmKHBhdGggPT0gJycpe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHNwYW4gPSAkKHRhZ0lucHV0KS5zaWJsaW5ncygpLmNoaWxkcmVuKCdzcGFuLmltYWdlVGl0bGUnKTtcbiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IHBhdGguc3BsaXQoXCJcXFxcXCIpLnBvcCgpO1xuXG4gICAgICAgICAgICBpZihmaWxlTmFtZS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICBzcGFuWzBdLmlubmVySFRNTCA9IGZpbGVOYW1lO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc3BhblswXS5pbm5lckhUTUwgPSBjYW5kaWRhdGVNYW5hZ2VyLm9sZEZpbGVOYW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGFnZSA9ICQodGFnSW5wdXQpLmF0dHIoXCJkYXRhLXJvbGVcIik7XG4gICAgICAgICAgICBpZihwYWdlID09ICdlZGl0Jyl7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5lZGl0RmlsZSh0YWdJbnB1dCwgZmlsZU5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgdmFsaWRhdGVFbWFpbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGV4cHJlc3Npb24gPSAvXltcXHdcXC1cXC5cXCtdK1xcQFthLXpBLVowLTlcXC5cXC1dK1xcLlthLXpBLXowLTldezIsNH0kLztcbiAgICAgICAgICAgIGlmIChleHByZXNzaW9uLnRlc3QoJCgnI2VtYWlsJykudmFsKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNoYW5nZVZpc2libGVJbkxpbms6IGZ1bmN0aW9uIChjb21lSW5wdXQsIGNvbWVQLCBjb21lQnV0dG9uKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBjb21lSW5wdXQ7XG4gICAgICAgICAgICB2YXIgaW5wdXRWYWx1ZSA9IGNvbWVJbnB1dC52YWwoKTtcbiAgICAgICAgICAgIHZhciBwSW5wdXQgPSBjb21lUDtcblxuICAgICAgICAgICAgaWYoaW5wdXQuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VtcHR5JylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHBJbnB1dC50ZXh0KGlucHV0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwSW5wdXQuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBjb21lQnV0dG9uLnRleHQoJ0NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICBjb21lQnV0dG9uLmFkZENsYXNzKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbWVCdXR0b24udGV4dCgnQWRkJyk7XG4gICAgICAgICAgICAgICAgY29tZUJ1dHRvbi5yZW1vdmVDbGFzcygnY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2hvdygpO1xuICAgICAgICAgICAgICAgIHBJbnB1dC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBsb2FkUGhvdG9DYW5kaWRhdGU6IGZ1bmN0aW9uIChlbGVtLCB1cmwsIGlkKSB7XG4gICAgICAgICAgICB2YXIgaW1nID0gJChlbGVtKS5zaWJsaW5ncygnLmFkZC1waG90by1jYW5kaWRhdGUnKS5jaGlsZHJlbignaW1nI3Bob3RvJyk7XG4gICAgICAgICAgICB2YXIgZmlsZSA9IGVsZW0uZmlsZXNbMF07XG4gICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3RlbXBGaWxlJywgZmlsZSk7XG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgnaWQnLCBpZCk7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5hdHRyKCdzcmMnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24gKGVsZW0sIHVybCkge1xuICAgICAgICAgICAgJChlbGVtKS5hdXRvY29tcGxldGUoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBkb1NlYXJjaENhbmRpZGF0ZTogZnVuY3Rpb24gKGVsZW0sIHVybCkge1xuICAgICAgICAgICAgJChlbGVtKS5hdXRvY29tcGxldGUoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZWxldGVQaG90bzogZnVuY3Rpb24gKGlkLCB1cmwpIHtcbiAgICAgICAgICAgIHZhciBpbWdQYXRoID0gJChcIi5hZGQtcGhvdG8tY2FuZGlkYXRlIGltZ1wiKS5hdHRyKFwic3JjXCIpO1xuICAgICAgICAgICAgaWYodHlwZW9mIGltZ1BhdGggIT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgICAgICAgICAgIHZhciBhcnJEYXRhID0gaW1nUGF0aC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IGFyckRhdGFbYXJyRGF0YS5sZW5ndGggLSAxXTtcblxuICAgICAgICAgICAgICAgICQuZ2V0KHVybCwge2ZpbGVOYW1lOiBmaWxlTmFtZSwgaWQ6IGlkfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlTGluazogZnVuY3Rpb24gKGVsZW0sIHVybCkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICcnO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gJyc7XG4gICAgICAgICAgICBidXR0b24gPSAkKGVsZW0pLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICBpZihidXR0b24gPT0gJ2NoYW5nZUxpbmtMaW5rZWRpbicpe1xuICAgICAgICAgICAgICAgIGlucHV0ID0gJ2xpbmtlZGluJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGJ1dHRvbiA9PSAnY2hhbmdlTGlua0ZhY2Vib29rJyl7XG4gICAgICAgICAgICAgICAgaW5wdXQgPSAnZmFjZWJvb2snO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoYnV0dG9uID09ICdjaGFuZ2VFbWFpbCcpe1xuICAgICAgICAgICAgICAgIGlucHV0ID0gJ2VtYWlsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShpbnB1dClbMF0udmFsdWU7XG4gICAgICAgICAgICBpZihjYW5kaWRhdGVNYW5hZ2VyLmlzRW1wdHkodmFsKSl7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0ZpZWxkIGlzIGVtcHR5IScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhOiB7aWQ6IGpzb25Db25maWcuaWQsIGlucHV0OiBpbnB1dCwgdmFsOiB2YWx9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBpc0VtcHR5OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBpZighdmFsIHx8IHZhbC5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZWRpdEZpbGU6IGZ1bmN0aW9uICh0YWdJbnB1dCwgZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dElkID0gJCh0YWdJbnB1dCkuYXR0cihcImlkXCIpLnNwbGl0KCdfJylbMF07XG4gICAgICAgICAgICB2YXIgZmlsZSA9IHRhZ0lucHV0LmZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCd0ZW1wRmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ2lkJywganNvbkNvbmZpZy5pZCk7XG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgnb2xkRmlsZU5hbWUnLCBjYW5kaWRhdGVNYW5hZ2VyLm9sZEZpbGVOYW1lKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdmaWxlTmFtZScsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdpbnB1dElkJywgaW5wdXRJZCk7XG5cblxuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgdXJsOiBqc29uQ29uZmlnLmNhbmRpZGF0ZUVkaXRGaWxlLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgaXMgYWRkZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBkZWxldGVGaWxlOiBmdW5jdGlvbiAoZmlsZU5hbWUpIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cmw6IGpzb25Db25maWcuY2FuZGlkYXRlRGVsZXRlRmlsZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7aWQ6IGpzb25Db25maWcuaWQsIGZpbGVOYW1lOiBmaWxlTmFtZX0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgaXMgZGVsZXRlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuXG4gICAgICAgIGRlbGV0ZUZyb21WYWNhbmN5OiBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIHZhciBzdXJlQmxvY2sgPSAkKGUudGFyZ2V0KS5zaWJsaW5ncygnLnN1cmUtZGVsZXRlJyk7XG4gICAgICAgICAgICAgICAgdmFyIHllc0J1dHRvbiA9IHN1cmVCbG9jay5maW5kKCdwJyk7XG5cbiAgICAgICAgICAgICAgICBzdXJlQmxvY2suY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9ICQoZS50YXJnZXQpLmF0dHIoJ2RhdGEtaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFjYW5jeUlkID0gJChcIiN2YWNhbmN5SWRcIikuYXR0cignZGF0YS1pZCcpO1xuXG4gICAgICAgICAgICAgICAgeWVzQnV0dG9uLmZpcnN0KCkuY2xpY2soZnVuY3Rpb24gKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRCbG9jayA9ICQodGhpcykuY2xvc2VzdChcIi5jYW5kaWRhdGUtbGlzdC1pdGVtXCIpO1xuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL3ZhY2FuY3kvY2FuZGlkYXRlL2RlbGV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYW5kaWRhdGUnOmNhbmRpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFjYW5jeUlkJzp2YWNhbmN5SWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50QmxvY2sucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgeWVzQnV0dG9uLmxhc3QoKS5jbGljayhmdW5jdGlvbiAoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5zdXJlLWRlbGV0ZVwiKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZWZyb206IGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmRlbGV0ZUZyb21WYWNhbmN5KGV2ZW50KTtcbiAgICAgICAgfSxcbi8vIGNvbmZpZ0RhdGFcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGNvbmZpZ0RhdGEpIHtcbiAgICAgICAgICAganNvbkNvbmZpZyA9IGNvbmZpZ0RhdGE7XG4gICAgICAgICAgICQoXCIuZGVsZXRlLWJ0blwiKS5vbignY2xpY2snLHRoaXMuZGVsZXRlZnJvbSk7XG4gICAgICAgICAgICQoJ2EjZmlsZVJlc3VtZScpLm9uKCdjbGljaycsIHRoaXMuZmlsZVJlc3VtZSk7XG4gICAgICAgICAgICQoJ2EjZmlsZVRlc3RUYXNrJykub24oJ2NsaWNrJywgdGhpcy5maWxlVGVzdFRhc2spO1xuICAgICAgICAgICAkKCdpLmNsZWFuQ3VycmVudEJsb2NrJykub24oJ2NsaWNrJywgdGhpcy5jbGVhbkN1cnJlbnRCbG9jayk7XG4gICAgICAgICAgICQoJ2lucHV0LmdldEZpbGUnKS5vbignY2hhbmdlJywgdGhpcy5zZXRGaWxlKTtcbiAgICAgICAgICAgJCgnaW5wdXQuZ2V0RmlsZScpLm9uKCdjbGljaycsIHRoaXMuZ2V0RmlsZSk7XG4gICAgICAgICAgICQoJy5zb2NpYWwtbGlua19lbWFpbCBidXR0b24nKS5vbignY2xpY2snLCB0aGlzLnNvY2lhbExpbmtFbWFpbCk7XG4gICAgICAgICAgICQoJy5zb2NpYWwtbGluayBidXR0b24nKS5vbignY2xpY2snLCB0aGlzLnNvY2lhbExpbmspO1xuICAgICAgICAgICAkKCdpbnB1dCNwaG90b0NhbmRpZGF0ZScpLm9uKCdjaGFuZ2UnLCB0aGlzLnBob3RvQ2FuZGlkYXRlKTtcbiAgICAgICAgICAgJCgnI2xvY2F0aW9uJykub24oJ2lucHV0JywgdGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICQoJyNzZWFyY2hJdGVtJykub24oJ2lucHV0JywgdGhpcy5zZWFyY2hDYW5kaWRhdGUpO1xuICAgICAgICAgICAkKCdpbnB1dCN1cGRhdGVQaG90b0NhbmRpZGF0ZScpLm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZVBob3RvQ2FuZGlkYXRlKTtcbiAgICAgICAgICAgJCgnI2NoYW5nZUxpbmtMaW5rZWRpbiwgI2NoYW5nZUxpbmtGYWNlYm9vaywgI2NoYW5nZUVtYWlsJykub24oJ2NsaWNrJywgdGhpcy5lZGl0TGluayk7XG5cbiAgICAgICAgICAgJCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICB2YXIgc2VsZWN0MiA9ICQoJyNzb3J0Q2FuZGlkYXRlJykuc2VsZWN0Mih7XG4gICAgICAgICAgICAgICAgICAgdGFnczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1R5cGVzIGNhbmRpZGF0ZSdcbiAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgLy8gc2VsZWN0Mi5kYXRhKCdzZWxlY3QyJykuJGNvbnRhaW5lci5hZGRDbGFzcygnc29ydF9jYW5kaWRhdGUnKTtcbiAgICAgICAgICAgICAgIC8vIHNlbGVjdDIuZGF0YSgnc2VsZWN0MicpLiRkcm9wZG93bi5hZGRDbGFzcygnc29ydF9jYW5kaWRhdGUtLW9wZW4nKTtcbiAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJyNjYW5kaWRhdGUtbmFtZSwgI3JlcXVpcmVkX3Bvc2l0aW9uLCAjZWR1Y2F0aW9uLCAjZXhwZXJpZW5jZSwgI2Rlc2NyaXB0aW9uJykuZWRpdGFibGUoe1xuICAgICAgICAgICAgICAgYWpheE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgIHVybDoganNvbkNvbmZpZy5WYWNhbmN5VXBkYXRlLFxuICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnI2NhbmRpZGF0ZS1sb2NhdGlvbicpLmVkaXRhYmxlKHtcblxuICAgICAgICAgICAgICAgIGFqYXhPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QyJyxcbiAgICAgICAgICAgICAgICBvbmJsdXI6ICdzdWJtaXQnLFxuICAgICAgICAgICAgICAgIGVtcHR5dGV4dDogJ05vbmUnLFxuXG4gICAgICAgICAgICAgICAgc2VsZWN0Mjoge1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1NlbGVjdCBhIFJlcXVlc3RlcicsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTY1cHgnLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtSW5wdXRMZW5ndGg6IDMsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFqYXg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDoganNvbkNvbmZpZy5jaXR5U2VhcmNoQXV0b2NvbXBsZXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uICh0ZXJtLCBwYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGVybTogdGVybSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGZ1bmN0aW9uIChkYXRhLCBwYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVzdWx0czogZGF0YSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRSZXN1bHQ6IGZ1bmN0aW9uIChjaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2l0eTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0U2VsZWN0aW9uOiBmdW5jdGlvbiAoY2l0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNpdHk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGluaXRTZWxlY3Rpb246IGZ1bmN0aW9uIChlbGVtZW50LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQuZ2V0KGpzb25Db25maWcuY2l0eVNlYXJjaEF1dG9jb21wbGV0ZSwgeyBxdWVyeTogZWxlbWVudC52YWwoKSB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ2pzb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCcjc2tpbGxzJykub24oJ2JlZm9yZUl0ZW1BZGQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSBldmVudC5pdGVtO1xuICAgICAgICAgICAgICAgIGlmICghZXZlbnQub3B0aW9ucyB8fCAhZXZlbnQub3B0aW9ucy5wcmV2ZW50UG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWC1DU1JGLVRPS0VOJzogJCgnbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpLmF0dHIoJ2NvbnRlbnQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDoganNvbkNvbmZpZy5jYW5kaWRhdGVVcGRhdGVTa2lsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7aWQ6IGpzb25Db25maWcuaWQsIHNraWxsOiB0YWd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjYW5kaWRhdGVNYW5hZ2VyLmlzRW1wdHkoZGF0YSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2tpbGxzJykudGFnc2lucHV0KCdyZW1vdmUnLCB0YWcsIHtwcmV2ZW50UG9zdDogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJyNza2lsbHMnKS5vbignYmVmb3JlSXRlbVJlbW92ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IGV2ZW50Lml0ZW07XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBqc29uQ29uZmlnLmNhbmRpZGF0ZURlbGV0ZVNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2lkOiBqc29uQ29uZmlnLmlkLCBza2lsbDogdGFnfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjYW5kaWRhdGVNYW5hZ2VyLmlzRW1wdHkoZGF0YSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNza2lsbHMnKS50YWdzaW5wdXQoJ2FkZCcsIHRhZywge3ByZXZlbnRQb3N0OiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBmaWxlUmVzdW1lOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIub2xkRmlsZU5hbWUgPSAnJztcbiAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5uZXdEaXYoJ3Jlc3VtZScsICdpbnB1dFJlc3VtZV8nICsgY2FuZGlkYXRlTWFuYWdlci5yZXN1bWVDb3VudGVyLCAnRmlsZSBvZiBSZXN1bWUnLCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLnJlc3VtZUNvdW50ZXIrKztcbiAgICAgICB9LFxuXG4gICAgICAgIGZpbGVUZXN0VGFzazogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLm9sZEZpbGVOYW1lID0gJyc7XG4gICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIubmV3RGl2KCd0ZXN0VGFzaycsICdpbnB1dFRlc3RfJyArIGNhbmRpZGF0ZU1hbmFnZXIudGVzdFRhc2tDb3VudGVyLCAnRmlsZSBvZiBUZXN0IFRhc2snLCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLnRlc3RUYXNrQ291bnRlcisrO1xuICAgICAgIH0sXG5cbiAgICAgICAgY2xlYW5DdXJyZW50QmxvY2s6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmNsZWFuSW5wdXQoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRGaWxlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuZ2V0RmlsZU5hbWUoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRGaWxlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuc2V0RmlsZU5hbWUoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzb2NpYWxMaW5rRW1haWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmKCFjYW5kaWRhdGVNYW5hZ2VyLnZhbGlkYXRlRW1haWwoJCgnI2VtYWlsJykudmFsKCkpKXtcbiAgICAgICAgICAgICAgICBhbGVydCgnSW52YWxpZCBlbWFpbCEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuY2hhbmdlVmlzaWJsZUluTGluaygkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLCAkKHRoaXMpLnNpYmxpbmdzKCdwJyksICQodGhpcykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNvY2lhbExpbms6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIuY2hhbmdlVmlzaWJsZUluTGluaygkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLCAkKHRoaXMpLnNpYmxpbmdzKCdwJyksICQodGhpcykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBob3RvQ2FuZGlkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLnVwbG9hZFBob3RvQ2FuZGlkYXRlKHRoaXMsIGpzb25Db25maWcudXBsb2FkUGhvdG9VcmwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGxvY2F0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmdldExvY2F0aW9uKHRoaXMsIGpzb25Db25maWcuY2l0eVNlYXJjaEF1dG9jb21wbGV0ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VhcmNoQ2FuZGlkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVNYW5hZ2VyLmRvU2VhcmNoQ2FuZGlkYXRlKHRoaXMsIGpzb25Db25maWcuY2FuZGlkYXRlU2VhcmNoQXV0b2NvbXBsZXRlKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVQaG90b0NhbmRpZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FuZGlkYXRlTWFuYWdlci5kZWxldGVQaG90byhqc29uQ29uZmlnLmlkLCBqc29uQ29uZmlnLmRlbGV0ZVBob3RvVXJsKTtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIudXBsb2FkUGhvdG9DYW5kaWRhdGUodGhpcywganNvbkNvbmZpZy51cGRhdGVQaG90b1VybCwganNvbkNvbmZpZy5pZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZWRpdExpbms6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZU1hbmFnZXIudXBkYXRlTGluayh0aGlzLCBqc29uQ29uZmlnLmVkaXRlTGluayk7XG4gICAgICAgIH0sXG5cbiAgICB9O1xuXG4gICAgJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnW25hbWU9XCJzZWFyY2hUYWdzXCJdJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgc29ydCA9ICQoJ2lucHV0W25hbWU9XCJzZWFyY2gtdGFnc1wiXScpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3J0ID0gJCgnaW5wdXRbbmFtZT1cInNlYXJjaC10YWdzXCJdJykuYXR0cignZGF0YS1zb3J0Jyk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NhbmRpZGF0ZS9saXN0LycgKyBzb3J0LFxuICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFTb3J0LFxuXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGh0bWwpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gJy9jYW5kaWRhdGUvbGlzdC8nICsgc29ydCArICc/JyArIGRhdGFTb3J0O1xuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBzdHIpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmh0bWwoaHRtbCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ1tuYW1lPVwic2VhcmNoQ291bnRyeVwiXScpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHNvcnQgPSAkKCdpbnB1dFtuYW1lPVwic2VhcmNoLWNvdW50cnlcIl0nKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBkYXRhU29ydCA9ICQoJ2lucHV0W25hbWU9XCJzZWFyY2gtY291bnRyeVwiXScpLmF0dHIoJ2RhdGEtc29ydCcpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogJy9jYW5kaWRhdGUvbGlzdC8nICsgc29ydCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhU29ydCxcblxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAnL2NhbmRpZGF0ZS9saXN0LycgKyBzb3J0ICsgJz8nICsgZGF0YVNvcnQ7XG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHN0cik7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuaHRtbChodG1sKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnW25hbWU9XCJzZWFyY2hBZ2VcIl0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBzb3J0ID0gJCgnaW5wdXRbbmFtZT1cInNlYXJjaC1hZ2VcIl0nKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBkYXRhU29ydCA9ICQoJ2lucHV0W25hbWU9XCJzZWFyY2gtYWdlXCJdJykuYXR0cignZGF0YS1zb3J0Jyk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NhbmRpZGF0ZS9saXN0LycgKyBzb3J0LFxuICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFTb3J0LFxuXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGh0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcvY2FuZGlkYXRlL2xpc3QvJyArIHNvcnQgKyAnPycgKyBkYXRhU29ydDtcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc3RyKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5odG1sKGh0bWwpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuc29ydC1leHBlcmllbmNlIHNlbGVjdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3J0ID0gJChcIm9wdGlvbjpzZWxlY3RlZFwiLCB0aGlzKS5hdHRyKCdkYXRhLXNvcnQnKTtcbiAgICAgICAgICAgIHZhciBzb3J0ID0gJChcIm9wdGlvbjpzZWxlY3RlZFwiLCB0aGlzKS5hdHRyKCd2YWx1ZScpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogJy9jYW5kaWRhdGUvbGlzdC8nICsgc29ydCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhU29ydCxcblxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChodG1sKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcvY2FuZGlkYXRlL2xpc3QvJyArIHNvcnQgKyAnPycgKyBkYXRhU29ydDtcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc3RyKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5odG1sKGh0bWwpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4kKCcubW9yZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblxuICAgIGlmKCQodGhpcykudGV4dCgpPT09J1Nob3cgbW9yZScpe1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaXRlbS5oaWRkZW4nKS50b2dnbGVDbGFzcygnaGlkZGVuIHZpc2libGUnKTtcbiAgICAgICAgJCh0aGlzKS50ZXh0KCdTaG93IGxlc3MnKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5pdGVtLnZpc2libGUnKS50b2dnbGVDbGFzcygnaGlkZGVuIHZpc2libGUnKTtcbiAgICAgICAgJCh0aGlzKS50ZXh0KCdTaG93IG1vcmUnKVxuICAgIH1cblxufSk7XG5cbiQoJyNjYW5kaWRhdGVfYWRkJykua2V5ZG93bihmdW5jdGlvbihldmVudCl7XG4gICAgaWYoZXZlbnQua2V5Q29kZSA9PSAxMykge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSk7Il19
